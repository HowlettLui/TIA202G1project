<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>上班不要看球賽管理系統</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="./vendors/fontawesome-free/css/all.min.css">
  <!-- overlayScrollbars -->
  <link rel="stylesheet" href="./css/adminlte/OverlayScrollbars.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="./css/adminlte/adminlte.min.css">
  <!-- Bootstrap 5 -->
  <link rel="stylesheet" href="./css/bootstrap.min.css">
  <!-- dropzonejs -->
  <link rel="stylesheet" href="./vendors/dropzone/min/dropzone.min.css">

  <!-- for ethan's part -->
  <!-- summernote -->
  <!-- <link rel="stylesheet" href="./vendors/summernote-0.9.0-dist/summernote-bs5.css"> -->
  <!-- <link rel="stylesheet" href="./vendors/summernote-0.9.0-dist/summernote-lite.css"> -->

</head>

<body class="hold-transition sidebar-mini">

  <!-- Site wrapper -->
  <div class="wrapper">

    <!-- 導入共用 Navbar -->
    <div class="Navbar"></div>
    <!-- 導入共用 Sidebar -->
    <div class="Sidebar"></div>

    <!-- 開發畫面區塊start -->
    <section id="mainBlock" class="content-wrapper">
      <!-- content-header -->
      <section class="content-header">
        <div class="container-fluid">
          <div class="row mb-2">
            <div class="col-sm-6">
              <h1>新增商品</h1>
            </div>
            <div class="col-sm-6">
              <ol class="breadcrumb float-sm-right">
                <li class="breadcrumb-item"><a href="#">商品管理</a></li>
                <li class="breadcrumb-item active">新增商品</li>
              </ol>
            </div>
          </div>
        </div>
      </section>
      <!-- content-header end -->

      <!-- content，實際頁面內容 -->
      <section class="content">
        <div class="card">
          <div class="card-body">
            <div class="row">

              <!-- 先暫時不用Dropzone，用一般upload file的方式 -->
              <div class="col-sm-12">
                <div class="form-group">
                  <input id="item_photo" type="file" name="file" />
                </div>
              </div>
              <!-- photos upload with Dropzone -->
              <!-- <div class="col-sm-12 mt-2">
                  <label>商品照片上傳</label>
                  <div id="actions" class="row">
                    <div class="col-lg-6">
                      <div class="btn-group w-100">
                        <span class="btn btn-success col fileinput-button">
                          <i class="fas fa-plus"></i>
                          <span>Add files</span>
                        </span>
                        <button type="submit" class="btn btn-primary col start">
                          <i class="fas fa-upload"></i>
                          <span>Start upload</span>
                        </button>
                        <button type="reset" class="btn btn-warning col cancel">
                          <i class="fas fa-times-circle"></i>
                          <span>Cancel upload</span>
                        </button>
                      </div>
                    </div>
                    <div class="col-lg-6 d-flex align-items-center">
                      <div class="fileupload-process w-100">
                        <div id="total-progress" class="progress progress-striped active" role="progressbar"
                          aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                          <div class="progress-bar progress-bar-success" style="width:0%;" data-dz-uploadprogress>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="table table-striped files" id="previews">
                    <div id="template" class="row mt-2">
                      <div class="col-auto">
                        <span class="preview"><img src="data:," alt="" data-dz-thumbnail /></span>
                      </div>
                      <div class="col d-flex align-items-center">
                        <p class="mb-0">
                          <span class="lead" data-dz-name></span>
                          (<span data-dz-size></span>)
                        </p>
                        <strong class="error text-danger" data-dz-errormessage></strong>
                      </div>
                      <div class="col-4 d-flex align-items-center">
                        <div class="progress progress-striped active w-100" role="progressbar" aria-valuemin="0"
                          aria-valuemax="100" aria-valuenow="0">
                          <div class="progress-bar progress-bar-success" style="width:0%;" data-dz-uploadprogress>
                          </div>
                        </div>
                      </div>
                      <div class="col-auto d-flex align-items-center">
                        <div class="btn-group">
                          <button class="btn btn-primary start">
                            <i class="fas fa-upload"></i>
                            <span>Start</span>
                          </button>
                          <button data-dz-remove class="btn btn-warning cancel">
                            <i class="fas fa-times-circle"></i>
                            <span>Cancel</span>
                          </button>
                          <button data-dz-remove class="btn btn-danger delete">
                            <i class="fas fa-trash"></i>
                            <span>Delete</span>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div> -->
              <!-- photos upload with Dropzone end -->

              <div class="col-sm-6">
                <!-- text input -->
                <div class="form-group">
                  <label>商品型號</label>
                  <input id="item_model" type="text" class="form-control" placeholder="Enter ...">
                </div>
              </div>
              <div class="col-sm-6">
                <!-- text input -->
                <div class="form-group">
                  <label>商品名稱</label>
                  <input id="item_name" type="text" class="form-control" placeholder="Enter ...">
                </div>
              </div>
              <div class="col-sm-6">
                <!-- text input -->
                <div class="form-group">
                  <label>商品簡介</label>
                  <input id="item_content" type="text" class="form-control" placeholder="Enter ...">
                </div>
              </div>
              <div class="col-sm-6">
                <!-- text input -->
                <div class="form-group">
                  <label>商品類型</label>
                  <input id="item_type" type="text" class="form-control" placeholder="Enter ...">
                </div>
              </div>
              <div class="col-sm-6">
                <!-- text input -->
                <div class="form-group">
                  <label>商品價格</label>
                  <input id="item_price" type="text" class="form-control" placeholder="Enter ...">
                </div>
              </div>
              <div class="col-sm-6">
                <!-- text input -->
                <div class="form-group">
                  <label>商品大小</label>
                  <input id="item_size" type="text" class="form-control" placeholder="Enter ...">
                </div>
              </div>
              <div class="col-sm-6">
                <!-- text input -->
                <div class="form-group">
                  <label>商品顏色</label>
                  <input id="item_color" type="text" class="form-control" placeholder="Enter ...">
                </div>
              </div>
              <div class="col-sm-6">
                <!-- text input -->
                <div class="form-group">
                  <label>商品數量</label>
                  <input id="item_stock" type="text" class="form-control" placeholder="Enter ...">
                </div>
              </div>

              <!-- summernote -->
              <!-- <label>商品詳細內容</label>
              <div id="summernote"></div> -->
              <!-- summnernote暫時不能用，先用<textarea>代替 -->
              <div class="col-sm-12">
                <div class="form-group">
                  <label>商品詳細內容 (之後再改用summernote)</label>
                  <textarea id="item_details" class="form-control" rows="3" placeholder="Enter ..."></textarea>
                </div>
              </div>

            </div>

            <button id="save_item" class="btn btn-success" type="submit"> 儲存商品</button>
            <button class="btn btn-primary" type=""> 商品上架</button>
            <button class="btn btn-warning" type=""> 取消</button>
          </div>
          <!-- card-body end -->
        </div>
        <!-- card end -->
      </section>
      <!-- content end -->
    </section>
    <!-- 開發畫面區塊end -->

  </div>
  <!-- wrapper end -->

  <!-- jQuery -->
  <script src="./jquery/adminlte/jquery.min.js"></script>
  <!-- Bootstrap 5 -->
  <script src="./js/bootstrap.bundle.min.js"></script>
  <!-- overlayScrollbars -->
  <script src="./jquery/adminlte/jquery.overlayScrollbars.min.js"></script>
  <!-- AdminLTE App -->
  <script src="./js/adminlte/adminlte.min.js"></script>
  <!-- dropzonejs -->
  <script src="./vendors/dropzone/min/dropzone.min.js"></script>

  <!-- for ethan's part -->
  <!-- summernote -->
  <!-- <script src="./vendors/summernote-0.9.0-dist/summernote-bs5.js"></script> -->
  <!-- <script src="./vendors/summernote-0.9.0-dist/summernote-lite.js"></script> -->

  <script>
    $(".Navbar").load("./layout/navbar.html");
    $(".Sidebar").load("./layout/sidebar.html");

    $('#save_item').on('click', function () {
      const itemModel = {
        itemModel: $('#item_model').val()
      }
      const item = {
        itemName: $('#item_name').val(),
        itemContent: $('#item_content').val(),
        itemType: $('#item_type').val(),
        itemPrice: $('#item_price').val(),
        itemDetails: $('#item_details').val()
        // itemPhoto: $('#item_photo').val()
      }
      const itemInfo = {
        itemSize: $('#item_size').val(),
        itemColor: $('#item_color').val(),
        itemStock: $('#item_stock').val()
      }
      fetch('estoreadmin/add', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          itemModel,
          item,
          itemInfo
        })
      })
        .then(resp => resp.text())
        .then(data => {
          console.log(data);
          alert(data);
        })
        .catch((error) => {
          console.error('Error:', error);
        });
    });
  </script>

  <script>

    // 動態載入內容
    // $(document).ready(function () {
    //     // 使用事件代理確保所有 <a> 都正確綁定事件
    //     $('li.item_management').on('click', 'a.item_management', function (event) {
    //       event.stopPropagation(); // 阻止事件冒泡
    //       event.preventDefault(); // 阻止預設行為
    //       const url = $(this).attr('href'); // 取得 href 的值
    //       $('#mainBlock').load(url, function (response, status, xhr) {
    //           if (status === "error") {
    //               $('#mainBlock').html("<h1>錯誤</h1><p>無法載入頁面內容。</p>");
    //           }
    //       });
    //     });
    // });

    // 先暫時不用Dropzone，用一般upload file的方式
    // // DropzoneJS Demo Code Start
    // Dropzone.autoDiscover = false

    // // Get the template HTML and remove it from the doumenthe template HTML and remove it from the doument
    // var previewNode = document.querySelector("#template")
    // previewNode.id = ""
    // var previewTemplate = previewNode.parentNode.innerHTML
    // previewNode.parentNode.removeChild(previewNode)

    // var myDropzone = new Dropzone(document.body, { // Make the whole body a dropzone
    //   url: "/target-url", // Set the url
    //   thumbnailWidth: 80,
    //   thumbnailHeight: 80,
    //   parallelUploads: 20,
    //   previewTemplate: previewTemplate,
    //   autoQueue: false, // Make sure the files aren't queued until manually added
    //   previewsContainer: "#previews", // Define the container to display the previews
    //   clickable: ".fileinput-button" // Define the element that should be used as click trigger to select files.
    // })

    // myDropzone.on("addedfile", function(file) {
    //   // Hookup the start button
    //   file.previewElement.querySelector(".start").onclick = function() { myDropzone.enqueueFile(file) }
    // })

    // // Update the total progress bar
    // myDropzone.on("totaluploadprogress", function(progress) {
    //   document.querySelector("#total-progress .progress-bar").style.width = progress + "%"
    // })

    // myDropzone.on("sending", function(file) {
    //   // Show the total progress bar when upload starts
    //   document.querySelector("#total-progress").style.opacity = "1"
    //   // And disable the start button
    //   file.previewElement.querySelector(".start").setAttribute("disabled", "disabled")
    // })

    // // Hide the total progress bar when nothing's uploading anymore
    // myDropzone.on("queuecomplete", function(progress) {
    //   document.querySelector("#total-progress").style.opacity = "0"
    // })

    // // Setup the buttons for all transfers
    // // The "add files" button doesn't need to be setup because the config
    // // `clickable` has already been specified.
    // document.querySelector("#actions .start").onclick = function() {
    //   myDropzone.enqueueFiles(myDropzone.getFilesWithStatus(Dropzone.ADDED))
    // }
    // document.querySelector("#actions .cancel").onclick = function() {
    //   myDropzone.removeAllFiles(true)
    // }
    // // DropzoneJS Demo Code End

    // 先暫時不用summernote
    // $('#summernote').summernote({
    //   placeholder: 'Hello stand alone ui',
    //   tabsize: 2,
    //   height: 120
    // });
  </script>
</body>

</html>